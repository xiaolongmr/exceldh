<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>分类标签悬浮效果测试</title>
    <link rel="stylesheet" href="css/favorites.css">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: 0 auto;
        }
        .test-title {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        .demo-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #555;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2196f3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">🏷️ 分类标签悬浮效果测试</h1>
        
        <div class="instructions">
            <strong>测试说明：</strong><br>
            • 分类标签现在<strong>完全隐藏</strong>，不显示任何视觉元素<br>
            • 不会影响页面美观和行高<br>
            • <strong>只在"全部"分类下</strong>，将鼠标悬浮到收藏卡片上时显示分类tooltip<br>
            • <strong>在具体分类下不显示tooltip</strong>，因为已经进入该分类页面
        </div>

        <div class="demo-section">
            <div class="demo-title">🗒️ 分类筛选测试</div>
            
            <!-- 模拟分类标签栏 -->
            <div class="fav-category-tabs" style="margin-bottom: 20px;">
                <button class="fav-category-tab active" onclick="showCategory('all')">全部</button>
                <button class="fav-category-tab" onclick="showCategory('搜索引擎')">搜索引擎</button>
                <button class="fav-category-tab" onclick="showCategory('开发工具')">开发工具</button>
                <button class="fav-category-tab" onclick="showCategory('技术社区')">技术社区</button>
            </div>
            
            <!-- 模拟收藏列表 -->
            <div id="fav-list" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
            </div>
        </div>

        <div class="demo-section">
            <div class="demo-title">✅ 预期效果</div>
            <ul>
                <li>✅ 分类标签完全隐藏，不显示任何视觉元素</li>
                <li>✅ <strong>在"全部"分类下</strong>：鼠标悬浮显示"分类: XXX"的tooltip</li>
                <li>✅ <strong>在具体分类下</strong>：鼠标悬浮不显示tooltip</li>
                <li>✅ tooltip有黑色半透明背景和箭头指示</li>
                <li>✅ 悬浮效果平滑过渡</li>
            </ul>
        </div>

        <div class="demo-section">
            <div class="demo-title">🎯 操作指南</div>
            <p><strong>请执行以下测试：</strong></p>
            <ol>
                <li>在"全部"分类下，将鼠标移动到任意收藏卡片上</li>
                <li>确认出现"分类: XXX"的tooltip</li>
                <li>切换到具体分类（如"搜索引擎"）</li>
                <li>再次悬浮卡片，确认<strong>不显示</strong>tooltip</li>
                <li>切换回"全部"分类，确认tooltip重新显示</li>
            </ol>
        </div>

    </div>

    <script>
        console.log('🧪 分类标签悬浮效果测试页面已加载');
        
        // 所有收藏数据
        const allFavorites = [
            { id: 1, title: '百度搜索', desc: '全球最大的中文搜索引擎', category: '搜索引擎', icon: 'https://www.baidu.com/favicon.ico' },
            { id: 2, title: 'GitHub', desc: '代码托管和协作开发平台', category: '开发工具', icon: 'https://github.com/favicon.ico' },
            { id: 3, title: 'Google', desc: '全球最大的搜索引擎', category: '搜索引擎', icon: 'https://www.google.com/favicon.ico' },
            { id: 4, title: 'Stack Overflow', desc: '程序员问答社区', category: '技术社区', icon: 'https://stackoverflow.com/favicon.ico' }
        ];
        
        let currentCategory = 'all';
        
        // 显示指定分类的收藏
        function showCategory(category) {
            console.log(`🔄 切换到分类: ${category}`);
            currentCategory = category;
            
            // 为body添加CSS类来控制tooltip显示（与真实代码保持一致）
            if (category === 'all') {
                document.body.classList.remove('specific-category-active');
                console.log('✅ 移除specific-category-active类，tooltip将显示');
            } else {
                document.body.classList.add('specific-category-active');
                console.log('❌ 添加specific-category-active类，tooltip将隐藏');
            }
            
            // 更新标签样式
            document.querySelectorAll('.fav-category-tab').forEach(tab => {
                tab.classList.remove('active');
                if (
                    (category === 'all' && tab.textContent === '全部') ||
                    (category !== 'all' && tab.textContent === category)
                ) {
                    tab.classList.add('active');
                }
            });
            
            // 筛选收藏
            const filteredFavorites = category === 'all' ? 
                allFavorites : 
                allFavorites.filter(fav => fav.category === category);
            
            // 重新渲染收藏列表
            renderFavorites(filteredFavorites);
        }
        
        // 渲染收藏列表
        function renderFavorites(favorites) {
            const favList = document.getElementById('fav-list');
            
            favList.innerHTML = favorites.map(fav => `
                <div class="fav-card" data-category="${fav.category}">
                    <a href="#" class="fav-link" onclick="return false;">
                        <img src="${fav.icon}" class="fav-icon" alt="${fav.title}">
                        <div class="fav-context">
                            <div class="fav-title">${fav.title}</div>
                            <div class="fav-desc">${fav.desc}</div>
                            <span class="fav-category-tag" data-category="${fav.category}"></span>
                        </div>
                    </a>
                </div>
            `).join('');
            
            console.log(`🎨 渲染了 ${favorites.length} 个收藏（分类: ${currentCategory}）`);
        }
        
        // 测试函数
        function testCategoryTags() {
            const tags = document.querySelectorAll('.fav-category-tag');
            console.log(`找到 ${tags.length} 个分类标签`);
            
            tags.forEach((tag, index) => {
                const category = tag.getAttribute('data-category');
                console.log(`标签 ${index + 1}: ${category}`);
            });
        }
        
        // 页面加载后初始化
        window.addEventListener('load', () => {
            showCategory('all'); // 默认显示全部
            testCategoryTags();
        });
        
        // 添加悬浮事件监听
        document.addEventListener('mouseover', (e) => {
            if (e.target.closest('.fav-card')) {
                const card = e.target.closest('.fav-card');
                const category = card.getAttribute('data-category');
                const hasSpecificClass = document.body.classList.contains('specific-category-active');
                
                console.log(`👁️ 悬浮到分类: ${category}`);
                console.log(`📊 当前筛选: ${currentCategory}`);
                console.log(`🏷️ body.specific-category-active: ${hasSpecificClass}`);
                console.log(`✨ 应该显示tooltip: ${!hasSpecificClass}`);
            }
        });
    </script>
</body>
</html>