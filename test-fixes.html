<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neonç³»ç»ŸåŠŸèƒ½æµ‹è¯•</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/firebase-auth.css">
    <link rel="stylesheet" href="css/favorites.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        .test-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 8px 5px;
            font-size: 14px;
        }
        .test-btn:hover {
            background: #0056b3;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .warning {
            color: #ffc107;
            font-weight: bold;
        }
        .info {
            color: #17a2b8;
            font-weight: bold;
        }
        #test-results {
            background: #1e1e1e;
            color: #ffffff;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
            white-space: pre-wrap;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-online { background: #28a745; }
        .status-offline { background: #dc3545; }
        .status-warning { background: #ffc107; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ Neonç³»ç»ŸåŠŸèƒ½æµ‹è¯•</h1>
        <p>æ­¤é¡µé¢ç”¨äºæµ‹è¯•ä¿®å¤åçš„ç³»ç»ŸåŠŸèƒ½ï¼ŒåŒ…æ‹¬æ”¶è—æ˜¾ç¤ºã€æœç´¢æ¡†æ¸…ç†ã€é€€å‡ºç™»å½•ç­‰ã€‚</p>
        
        <!-- ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ -->
        <div class="test-section">
            <h3>ğŸ“Š ç³»ç»ŸçŠ¶æ€æ£€æŸ¥</h3>
            <div id="system-status">
                <div><span class="status-indicator status-offline"></span>æœåŠ¡å™¨è¿æ¥: æ£€æŸ¥ä¸­...</div>
                <div><span class="status-indicator status-offline"></span>è®¤è¯ç³»ç»Ÿ: æ£€æŸ¥ä¸­...</div>
                <div><span class="status-indicator status-offline"></span>æ”¶è—ç³»ç»Ÿ: æ£€æŸ¥ä¸­...</div>
                <div><span class="status-indicator status-offline"></span>æœç´¢åŠŸèƒ½: æ£€æŸ¥ä¸­...</div>
            </div>
            <button class="test-btn" onclick="checkSystemStatus()">ğŸ”„ é‡æ–°æ£€æŸ¥</button>
        </div>

        <!-- ç™»å½•æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ” ç™»å½•åŠŸèƒ½æµ‹è¯•</h3>
            <button class="test-btn" onclick="testLogin()">æµ‹è¯•ç™»å½•</button>
            <button class="test-btn" onclick="testLogout()">æµ‹è¯•é€€å‡ºç™»å½•</button>
            <button class="test-btn" onclick="checkAuthStatus()">æ£€æŸ¥è®¤è¯çŠ¶æ€</button>
        </div>

        <!-- æ”¶è—åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸŒŸ æ”¶è—åŠŸèƒ½æµ‹è¯•</h3>
            <button class="test-btn" onclick="testLoadFavorites()">åŠ è½½æ”¶è—åˆ—è¡¨</button>
            <button class="test-btn" onclick="testAddFavorite()">æ·»åŠ æµ‹è¯•æ”¶è—</button>
            <button class="test-btn" onclick="checkFavoritesVisibility()">æ£€æŸ¥æ”¶è—æ˜¾ç¤ºçŠ¶æ€</button>
        </div>

        <!-- æœç´¢åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ” æœç´¢åŠŸèƒ½æµ‹è¯•</h3>
            <button class="test-btn" onclick="testSearchBoxClear()">æµ‹è¯•æœç´¢æ¡†æ¸…ç†</button>
            <button class="test-btn" onclick="testSearchFunction()">æµ‹è¯•æœç´¢åŠŸèƒ½</button>
            <div style="margin-top: 10px;">
                <input type="text" id="test-search-input" placeholder="æµ‹è¯•æœç´¢æ¡†" style="padding: 8px; width: 200px; border: 1px solid #ddd; border-radius: 4px;">
                <button class="test-btn" onclick="clearTestSearch()">æ¸…ç©º</button>
            </div>
        </div>

        <!-- ç•Œé¢å…ƒç´ æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ¨ ç•Œé¢å…ƒç´ æµ‹è¯•</h3>
            <button class="test-btn" onclick="testDropdownMenu()">æµ‹è¯•ä¸‹æ‹‰èœå•</button>
            <button class="test-btn" onclick="testModalWindows()">æµ‹è¯•å¼¹çª—åŠŸèƒ½</button>
            <button class="test-btn" onclick="testButtonBindings()">æµ‹è¯•æŒ‰é’®ç»‘å®š</button>
        </div>

        <!-- æµ‹è¯•ç»“æœæ˜¾ç¤º -->
        <div class="test-section">
            <h3>ğŸ“‹ æµ‹è¯•ç»“æœ</h3>
            <button class="test-btn" onclick="clearResults()">æ¸…ç©ºç»“æœ</button>
            <button class="test-btn" onclick="exportResults()">å¯¼å‡ºç»“æœ</button>
            <button class="test-btn" onclick="openMainPage()">æ‰“å¼€ä¸»é¡µé¢æµ‹è¯•</button>
            <div id="test-results"></div>
        </div>
    </div>

    <!-- æ¨¡æ‹Ÿä¸»é¡µé¢çš„å…³é”® DOM å…ƒç´  -->
    <div style="display: none;" id="hidden-elements">
        <!-- æœç´¢æ¡† -->
        <input id="txt" placeholder="æœç´¢æ¡†">
        <div id="search-clear"></div>
        
        <!-- ç”¨æˆ·å¤´åƒæŒ‰é’® -->
        <div id="user-avatar-btn" style="display:none;">
            <div class="user-dropdown">
                <a id="logout-link" href="#">é€€å‡ºç™»å½•</a>
                <a id="account-settings-link" href="#">è´¦å·è®¾ç½®</a>
                <a id="profile-center-link" href="#">ä¸ªäººä¸­å¿ƒ</a>
                <a id="system-notice-link" href="#">ç³»ç»Ÿé€šçŸ¥</a>
            </div>
        </div>
        
        <!-- æ”¶è—æ¨¡å— -->
        <div id="my-fav-box" style="display:none;">
            <div id="fav-list"></div>
        </div>
        
        <!-- ç™»å½•å¼¹çª— -->
        <div id="login-modal" style="display:none;">
            <div class="login-modal-content">
                <form id="login-form">
                    <input id="login-email" type="email">
                    <input id="login-password" type="password">
                </form>
            </div>
        </div>
        
        <!-- ç™»å½•æŒ‰é’® -->
        <button id="top-login-btn">ç™»å½•</button>
    </div>

    <script>
        const output = document.getElementById('test-results');
        
        // æ¨¡æ‹Ÿè®¤è¯ç®¡ç†å™¨
        window.authManager = {
            handleLogout: function() {
                localStorage.removeItem('auth_token');
                log('æ¨¡æ‹Ÿé€€å‡ºç™»å½•æˆåŠŸ', 'success');
            },
            showLoginModal: function() {
                const modal = document.getElementById('login-modal');
                if (modal) modal.style.display = 'flex';
                log('æ¨¡æ‹Ÿç™»å½•å¼¹çª—æ‰“å¼€', 'success');
            },
            closeLoginModal: function() {
                const modal = document.getElementById('login-modal');
                if (modal) modal.style.display = 'none';
                log('æ¨¡æ‹Ÿç™»å½•å¼¹çª—å…³é—­', 'success');
            }
        };
        
        // æ¨¡æ‹Ÿæ”¶è—å‡½æ•°
        window.loadFavsFromCloud = async function() {
            log('æ¨¡æ‹ŸåŠ è½½æ”¶è—æ•°æ®', 'success');
            return Promise.resolve([]);
        };
        
        window.renderFavs = function() {
            log('æ¨¡æ‹Ÿæ¸²æŸ“æ”¶è—åˆ—è¡¨', 'success');
        };
        
        // æ¨¡æ‹Ÿç™»å½•å¼¹çª—å‡½æ•°
        window.showLoginModal = function() {
            return window.authManager.showLoginModal();
        };
        
        window.closeLoginModal = function() {
            return window.authManager.closeLoginModal();
        };
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = {
                'success': 'âœ…',
                'error': 'âŒ',
                'warning': 'âš ï¸',
                'info': 'ğŸ“'
            }[type] || 'ğŸ“';
            
            output.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            output.scrollTop = output.scrollHeight;
            
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        // æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
        async function checkSystemStatus() {
            log('å¼€å§‹ç³»ç»ŸçŠ¶æ€æ£€æŸ¥...', 'info');
            
            // æ£€æŸ¥æœåŠ¡å™¨è¿æ¥
            try {
                const response = await fetch('http://localhost:3000/api/health');
                if (response.ok) {
                    updateStatus(0, 'online', 'æœåŠ¡å™¨è¿æ¥: æ­£å¸¸');
                    log('æœåŠ¡å™¨è¿æ¥æ­£å¸¸', 'success');
                } else {
                    updateStatus(0, 'warning', 'æœåŠ¡å™¨è¿æ¥: å¼‚å¸¸');
                    log('æœåŠ¡å™¨å“åº”å¼‚å¸¸', 'warning');
                }
            } catch (error) {
                updateStatus(0, 'offline', 'æœåŠ¡å™¨è¿æ¥: æ–­å¼€');
                log('æœåŠ¡å™¨è¿æ¥å¤±è´¥: ' + error.message, 'error');
            }
            
            // æ£€æŸ¥è®¤è¯ç³»ç»Ÿ
            if (window.authManager) {
                updateStatus(1, 'online', 'è®¤è¯ç³»ç»Ÿ: å·²åŠ è½½');
                log('è®¤è¯ç³»ç»Ÿæ­£å¸¸åŠ è½½', 'success');
            } else {
                updateStatus(1, 'offline', 'è®¤è¯ç³»ç»Ÿ: æœªåŠ è½½');
                log('è®¤è¯ç³»ç»ŸæœªåŠ è½½', 'error');
            }
            
            // æ£€æŸ¥æ”¶è—ç³»ç»Ÿ
            if (window.loadFavsFromCloud && window.renderFavs) {
                updateStatus(2, 'online', 'æ”¶è—ç³»ç»Ÿ: å·²åŠ è½½');
                log('æ”¶è—ç³»ç»Ÿæ­£å¸¸åŠ è½½', 'success');
            } else {
                updateStatus(2, 'offline', 'æ”¶è—ç³»ç»Ÿ: æœªåŠ è½½');
                log('æ”¶è—ç³»ç»ŸæœªåŠ è½½', 'error');
            }
            
            // æ£€æŸ¥æœç´¢åŠŸèƒ½
            const searchInput = document.getElementById('txt');
            if (searchInput) {
                updateStatus(3, 'online', 'æœç´¢åŠŸèƒ½: æ­£å¸¸');
                log('æœç´¢æ¡†å…ƒç´ å­˜åœ¨', 'success');
            } else {
                updateStatus(3, 'offline', 'æœç´¢åŠŸèƒ½: å¼‚å¸¸');
                log('æœç´¢æ¡†å…ƒç´ ä¸å­˜åœ¨', 'error');
            }
        }
        
        function updateStatus(index, status, text) {
            const statusItems = document.querySelectorAll('#system-status div');
            if (statusItems[index]) {
                const indicator = statusItems[index].querySelector('.status-indicator');
                indicator.className = `status-indicator status-${status}`;
                statusItems[index].innerHTML = `<span class="status-indicator status-${status}"></span>${text}`;
            }
        }

        // æµ‹è¯•ç™»å½•åŠŸèƒ½
        async function testLogin() {
            log('å¼€å§‹æµ‹è¯•ç™»å½•åŠŸèƒ½...', 'info');
            
            try {
                const response = await fetch('http://localhost:3000/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: 'zlnp@qq.com',
                        password: 'jiushimima1.'
                    })
                });
                
                const result = await response.json();
                if (result.success) {
                    log('ç™»å½•APIè°ƒç”¨æˆåŠŸ', 'success');
                    log('ç”¨æˆ·ID: ' + result.user.id, 'info');
                    log('ç”¨æˆ·é‚®ç®±: ' + result.user.email, 'info');
                } else {
                    log('ç™»å½•å¤±è´¥: ' + result.error, 'error');
                }
            } catch (error) {
                log('ç™»å½•æµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æµ‹è¯•é€€å‡ºç™»å½•
        function testLogout() {
            log('å¼€å§‹æµ‹è¯•é€€å‡ºç™»å½•åŠŸèƒ½...', 'info');
            
            if (window.authManager && typeof window.authManager.handleLogout === 'function') {
                window.authManager.handleLogout();
                log('é€€å‡ºç™»å½•åŠŸèƒ½è°ƒç”¨æˆåŠŸ', 'success');
            } else {
                log('é€€å‡ºç™»å½•åŠŸèƒ½ä¸å¯ç”¨', 'error');
            }
        }

        // æ£€æŸ¥è®¤è¯çŠ¶æ€
        function checkAuthStatus() {
            log('æ£€æŸ¥å½“å‰è®¤è¯çŠ¶æ€...', 'info');
            
            const token = localStorage.getItem('auth_token');
            if (token) {
                log('æ‰¾åˆ°å­˜å‚¨çš„è®¤è¯ä»¤ç‰Œ', 'success');
                
                // å°è¯•è§£æä»¤ç‰Œ
                try {
                    const parts = token.split('.');
                    if (parts.length === 3) {
                        const payload = JSON.parse(atob(parts[1]));
                        log('ä»¤ç‰Œç”¨æˆ·ID: ' + payload.userId, 'info');
                        log('ä»¤ç‰Œè¿‡æœŸæ—¶é—´: ' + new Date(payload.exp * 1000).toLocaleString(), 'info');
                    }
                } catch (error) {
                    log('ä»¤ç‰Œè§£æå¤±è´¥: ' + error.message, 'warning');
                }
            } else {
                log('æœªæ‰¾åˆ°è®¤è¯ä»¤ç‰Œ', 'warning');
            }
        }

        // æµ‹è¯•åŠ è½½æ”¶è—
        async function testLoadFavorites() {
            log('å¼€å§‹æµ‹è¯•åŠ è½½æ”¶è—åŠŸèƒ½...', 'info');
            
            if (window.loadFavsFromCloud) {
                try {
                    await window.loadFavsFromCloud();
                    log('æ”¶è—åŠ è½½å‡½æ•°è°ƒç”¨æˆåŠŸ', 'success');
                } catch (error) {
                    log('æ”¶è—åŠ è½½å¤±è´¥: ' + error.message, 'error');
                }
            } else {
                log('æ”¶è—åŠ è½½å‡½æ•°ä¸å­˜åœ¨', 'error');
            }
        }

        // æµ‹è¯•æ·»åŠ æ”¶è—
        async function testAddFavorite() {
            log('å¼€å§‹æµ‹è¯•æ·»åŠ æ”¶è—åŠŸèƒ½...', 'info');
            
            try {
                const token = localStorage.getItem('auth_token');
                if (!token) {
                    log('éœ€è¦å…ˆç™»å½•æ‰èƒ½æ·»åŠ æ”¶è—', 'warning');
                    return;
                }
                
                const response = await fetch('http://localhost:3000/api/favorites', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        title: 'æµ‹è¯•ç½‘ç«™',
                        url: 'https://test.example.com',
                        icon: 'https://test.example.com/favicon.ico',
                        description: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ”¶è—',
                        category: 'æµ‹è¯•åˆ†ç±»'
                    })
                });
                
                const result = await response.json();
                if (result.success) {
                    log('æ·»åŠ æ”¶è—æˆåŠŸ', 'success');
                } else {
                    log('æ·»åŠ æ”¶è—å¤±è´¥: ' + result.error, 'error');
                }
            } catch (error) {
                log('æ·»åŠ æ”¶è—æµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æ£€æŸ¥æ”¶è—æ˜¾ç¤ºçŠ¶æ€
        function checkFavoritesVisibility() {
            log('æ£€æŸ¥æ”¶è—æ˜¾ç¤ºçŠ¶æ€...', 'info');
            
            const favBox = document.getElementById('my-fav-box');
            if (favBox) {
                const isVisible = favBox.style.display !== 'none';
                log('æ”¶è—æ¨¡å—å­˜åœ¨ï¼Œå½“å‰æ˜¾ç¤ºçŠ¶æ€: ' + (isVisible ? 'æ˜¾ç¤º' : 'éšè—'), isVisible ? 'success' : 'warning');
                
                const favList = document.getElementById('fav-list');
                if (favList) {
                    const favCount = favList.children.length - 1; // å‡å»æ·»åŠ æŒ‰é’®
                    log('æ”¶è—æ•°é‡: ' + Math.max(0, favCount), 'info');
                } else {
                    log('æ”¶è—åˆ—è¡¨å…ƒç´ ä¸å­˜åœ¨', 'error');
                }
            } else {
                log('æ”¶è—æ¨¡å—å…ƒç´ ä¸å­˜åœ¨', 'error');
            }
        }

        // æµ‹è¯•æœç´¢æ¡†æ¸…ç†
        function testSearchBoxClear() {
            log('å¼€å§‹æµ‹è¯•æœç´¢æ¡†æ¸…ç†åŠŸèƒ½...', 'info');
            
            const searchInput = document.getElementById('txt');
            if (searchInput) {
                const currentValue = searchInput.value;
                log('å½“å‰æœç´¢æ¡†å†…å®¹: "' + currentValue + '"', 'info');
                
                // æ¸…ç©ºæœç´¢æ¡†
                searchInput.value = '';
                log('æœç´¢æ¡†å·²æ¸…ç©º', 'success');
                
                // éšè—æ¸…é™¤æŒ‰é’®
                const clearBtn = document.getElementById('search-clear');
                if (clearBtn) {
                    clearBtn.style.display = 'none';
                    log('æ¸…é™¤æŒ‰é’®å·²éšè—', 'success');
                }
            } else {
                log('æœç´¢æ¡†å…ƒç´ ä¸å­˜åœ¨', 'error');
            }
        }

        // æµ‹è¯•æœç´¢åŠŸèƒ½
        function testSearchFunction() {
            log('å¼€å§‹æµ‹è¯•æœç´¢åŠŸèƒ½...', 'info');
            
            const searchInput = document.getElementById('txt');
            if (searchInput) {
                // æ¨¡æ‹Ÿè¾“å…¥
                searchInput.value = 'æµ‹è¯•æœç´¢';
                searchInput.dispatchEvent(new Event('keyup'));
                log('æ¨¡æ‹Ÿæœç´¢è¾“å…¥å®Œæˆ', 'success');
                
                // æ£€æŸ¥æ¸…é™¤æŒ‰é’®æ˜¯å¦æ˜¾ç¤º
                const clearBtn = document.getElementById('search-clear');
                if (clearBtn && clearBtn.style.display !== 'none') {
                    log('æ¸…é™¤æŒ‰é’®æ­£ç¡®æ˜¾ç¤º', 'success');
                } else {
                    log('æ¸…é™¤æŒ‰é’®æœªæ˜¾ç¤º', 'warning');
                }
            } else {
                log('æœç´¢æ¡†å…ƒç´ ä¸å­˜åœ¨', 'error');
            }
        }

        // æ¸…ç©ºæµ‹è¯•æœç´¢æ¡†
        function clearTestSearch() {
            const input = document.getElementById('test-search-input');
            if (input) {
                input.value = '';
                log('æµ‹è¯•æœç´¢æ¡†å·²æ¸…ç©º', 'success');
            }
        }

        // æµ‹è¯•ä¸‹æ‹‰èœå•
        function testDropdownMenu() {
            log('å¼€å§‹æµ‹è¯•ä¸‹æ‹‰èœå•åŠŸèƒ½...', 'info');
            
            const avatarBtn = document.getElementById('user-avatar-btn');
            if (avatarBtn) {
                const isVisible = avatarBtn.style.display !== 'none';
                log('ç”¨æˆ·å¤´åƒæŒ‰é’®æ˜¾ç¤ºçŠ¶æ€: ' + (isVisible ? 'æ˜¾ç¤º' : 'éšè—'), isVisible ? 'success' : 'warning');
                
                if (isVisible) {
                    // æµ‹è¯•ç‚¹å‡»å¤´åƒ
                    avatarBtn.click();
                    log('æ¨¡æ‹Ÿç‚¹å‡»ç”¨æˆ·å¤´åƒ', 'info');
                    
                    setTimeout(() => {
                        const dropdown = document.querySelector('.user-dropdown');
                        if (dropdown && dropdown.classList.contains('show')) {
                            log('ä¸‹æ‹‰èœå•æ­£ç¡®æ˜¾ç¤º', 'success');
                        } else {
                            log('ä¸‹æ‹‰èœå•æœªæ˜¾ç¤º', 'warning');
                        }
                    }, 100);
                }
            } else {
                log('ç”¨æˆ·å¤´åƒæŒ‰é’®ä¸å­˜åœ¨', 'error');
            }
        }

        // æµ‹è¯•å¼¹çª—åŠŸèƒ½
        function testModalWindows() {
            log('å¼€å§‹æµ‹è¯•å¼¹çª—åŠŸèƒ½...', 'info');
            
            if (window.showLoginModal) {
                window.showLoginModal();
                log('ç™»å½•å¼¹çª—æ‰“å¼€æµ‹è¯•å®Œæˆ', 'success');
                
                setTimeout(() => {
                    if (window.closeLoginModal) {
                        window.closeLoginModal();
                        log('ç™»å½•å¼¹çª—å…³é—­æµ‹è¯•å®Œæˆ', 'success');
                    }
                }, 1000);
            } else {
                log('ç™»å½•å¼¹çª—å‡½æ•°ä¸å­˜åœ¨', 'error');
            }
        }

        // æµ‹è¯•æŒ‰é’®ç»‘å®š
        function testButtonBindings() {
            log('å¼€å§‹æµ‹è¯•æŒ‰é’®ç»‘å®š...', 'info');
            
            const buttons = [
                { id: 'logout-link', name: 'é€€å‡ºç™»å½•' },
                { id: 'account-settings-link', name: 'è´¦å·è®¾ç½®' },
                { id: 'profile-center-link', name: 'ä¸ªäººä¸­å¿ƒ' },
                { id: 'system-notice-link', name: 'ç³»ç»Ÿé€šçŸ¥' }
            ];
            
            buttons.forEach(btn => {
                const element = document.getElementById(btn.id);
                if (element) {
                    log(`${btn.name}æŒ‰é’®å­˜åœ¨`, 'success');
                    
                    // æ£€æŸ¥æ˜¯å¦æœ‰äº‹ä»¶ç›‘å¬å™¨
                    const hasListener = element.onclick || element.addEventListener;
                    if (hasListener) {
                        log(`${btn.name}æŒ‰é’®æœ‰äº‹ä»¶ç»‘å®š`, 'success');
                    } else {
                        log(`${btn.name}æŒ‰é’®å¯èƒ½æ²¡æœ‰äº‹ä»¶ç»‘å®š`, 'warning');
                    }
                } else {
                    log(`${btn.name}æŒ‰é’®ä¸å­˜åœ¨`, 'error');
                }
            });
        }

        // æ¸…ç©ºç»“æœ
        function clearResults() {
            output.textContent = '';
        }

        // å¯¼å‡ºç»“æœ
        function exportResults() {
            const results = output.textContent;
            const blob = new Blob([results], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `neon-test-results-${new Date().toISOString().slice(0,19).replace(/:/g,'-')}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            log('æµ‹è¯•ç»“æœå·²å¯¼å‡º', 'success');
        }
        
        // æ‰“å¼€ä¸»é¡µé¢è¿›è¡Œå®é™…æµ‹è¯•
        function openMainPage() {
            window.open('http://localhost:3000/index.html', '_blank');
            log('å·²æ‰“å¼€ä¸»é¡µé¢ï¼Œè¯·åœ¨æ–°çª—å£ä¸­è¿›è¡Œå®é™…æµ‹è¯•', 'info');
            log('æµ‹è¯•é¡¹ç›®ï¼š', 'info');
            log('1. ç™»å½•åæ”¶è—åˆ—è¡¨æ˜¯å¦æ˜¾ç¤º', 'info');
            log('2. æœç´¢æ¡†æ˜¯å¦ä¸ºç©º', 'info');
            log('3. ç‚¹å‡»ç”¨æˆ·å¤´åƒåä¸‹æ‹‰èœå•æŒ‰é’®æ˜¯å¦å¯ç”¨', 'info');
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
        window.addEventListener('load', () => {
            setTimeout(checkSystemStatus, 1000);
        });
    </script>
</body>
</html>